{% extends 'main_home.html' %}
{% load static %}
{% block content %}
<h4>Customers</h4>
<div class="table-responsive">
  <table class="table table-striped table-md">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Customer</th>
        <th scope="col">Contact</th>
        <th scope="col">Plan</th>
        <th scope="col">Plan Type</th>
        <th scope="col">Plan Status</th>
        <th scope="col">Price</th>
        <th scope="col">Plan Expire Date</th>
        <th scope="col">Address</th>
      </tr>
    </thead>
    <tbody>
        {% for customer in customers %}
        <tr class="customer">
            <td>{{customer.id}}</td>
            <td>{{customer.full_name|title}}</td>
            <td>{{customer.phone_no}}</td>
            <td colspan="5" class="customer-toggle"><i class="bi bi-caret-down-fill"></i></td>
            <td>{{customer.address|title}}</td>
        </tr>
            {% for subs in subscription %}
            {% if subs.customer == customer %}
            <tr class="hidden_class plan_details">
                <td colspan="3">{{forloop.counter}}</td>
                <td>{{subs.plan.plan}}</td>
                <td>{{subs.plan.plan_type}}</td>
                <td>{{subs.plan_status}}</td>
                <td>{{subs.plan.price}}</td>
                <td colspan="2">{{subs.end_date|date}}</td>
            </tr>
            {% endif %}
            {% endfor %}
        {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}